## Installation

How to install the MSMP on your server?

### First steps

First of all, you must have a Spigot server for Minecraft 1.19.4: other versions are not supported.
If you don't know how to install it, you must look at the [official documentation](https://www.spigotmc.org/wiki/spigot-installation/).

Then, you can download these plugins:
- [MSMPCore](https://github.com/msmp-mc/msmp-core/releases)
- [AlteredRespawn](https://github.com/msmp-mc/altered-respawn/releases)
- [BasicMazeWorldGenerator](https://github.com/msmp-mc/basic-maze-world-generator/releases)

You must put these plugins in the `plugins` folder of your server.

Finally, you can start your server.

### Basic Configuration

When you start your server, you must wait a few seconds for the plugins to be loaded.
Then, you can stop your server.

You must have these files:
- `plugins/BasicMazeWorldGenerator/config.yml`
- `bukkit.yml`

If you don't have it, you must start your server again.

Now, download this application: [maze-generator-cli](https://github.com/msmp-mc/maze-generator-cli).
And enter this command to create a 36x36 chunks maze with one difficulty:
```bash
./maze-generator -s 100 -d 1 -o maze.txt -g 1
```
The maze will be saved in the `maze.txt` file.

Then, you must put this file in the `plugins/BasicMazeWorldGenerator` folder.

Now, you must edit the `bukkit.yml` file to enable the generation.
Add these lines at the end of the file:
```yml
worlds:
  YOUR_WORLD_NAME:
    generator: BasicMazeWorldGenerator
```
Don't forget to replace the `YOUR_WORLD_NAME` by the name of your world (by default it's `world`). Your world's name is the 
value inside the `level-name` in the server.properties file.

These lines will replace the default world generation by our custom generation.

Finally, you can start your server again and the basic configuration is finished.

## Documentations

### Config

The config is located at `config/BasicMazeWorldGenerator/config.yml`.

Currently, the default config is:
```yml
# The maze must be generated by the MazeGeneratorCLI
# Look at this repo for more information: https://github.com/msmp-mc/maze-generator-cli
maze:
  path: maze.txt
  coefficient:
    chest:
      # The coefficient of chest spawn is the number of wall without chest between two chests (on average)
      # For example: if the coefficient is 5, there will be 5 walls without chest between two chests -> C W W W W W C W W W W W C ...
      spawn: 10
      # The coefficient chest dist describes the quality of loot in the chest
      # For example: if the coefficient is 200, only tier-one chest will be generated in the first 200 blocks, the tier-two will be added after these 200 blocks, etc...
      dist: 200
```

#### Maze related

- `path`: the path to the maze file (relative to the plugin's config directory)
- `coefficient`: the coefficient of the maze
    - `chest`: the coefficient related to the chest placed in the maze
        - `spawn`: numbers of wall without chest between two chests (on average)
        - `dist`: describes the quality of loot in the chest

## Generate a maze

To generate a maze, you must use the CLI App [MazeGeneratorCLI](https://github.com/msmp-mc/maze-generator-cli).

This command:
```bash
./maze-generator -s 100 -d 1 -o maze.txt -g 1
```

will generate a maze for starting at (800;800) and ending at (-800;-800) blocks world with the difficulty 1 (hard).
It will also have a hole in the external wall: the player will be able to go outside the maze (this is the exit).
This maze will be stored in `maze.txt` and this is this file you must put inside the config folder.

You can also use replace `-g 1` by `-g x` with x > 0 to generate a maze with x hole in the wall (or x exists).

More information about the CLI App in the [repo of this project](https://github.com/msmp-mc/maze-generator-cli).

#### How to generate a maze with a specific size (in chunk)?

The size of the maze determines the size of the world.

When we specify a size of 100, it means that the maze will be 800x800 chunks, but why?

Let's go some simple math (never look inside these projects if you don't want to be scared by the math):
- A cell in the maze is a chunk in the world
- So, the cell is a square of 16x16 blocks
- The maze is a grid of cells with walls
- The maze is centered at (0;0)
- These walls are included inside the cells' chunk
- So, the size of the maze is the number of cells in the grid * 16
- But why 16? Because a chunk is a square of 16x16 blocks
- Thus, the maze start at (the number of cells in the grid * 16/2;the number of cells in the grid * 16/2) and finish at (-the number of cells in the grid * 16/2;-the number of cells in the grid * 16/2)
- Why? Because we want the maze to be centered at (0;0), so we must shift it by half of its size, that's all

Okay, let's sum up:
- To generate a maze starting at (x;x) and ending at (-x;-x), we must generate a maze with a size of x/8 chunks

Example:
- We want a maze starting at (800;800) and ending at (-800;-800), so we must create a maze with a size of 800/8 = 100
- We want a maze starting at (1000;1000) and ending at (-1000;-1000), so we must create a maze with a size of 1000/8 = 125
